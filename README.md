# ESP32-Robot-Controller
Repo for the library to run an FRC-style robot from an ESP32 microcontroller with a Bluetooth joystick and PWM control for motors.

# General Information
Currently the only supported joystick is a PS3 Controller, although support for PS4 controllers may be a possibility in the future.  The motor controller class uses the PWM timers and channels built into the ESP32, and you can control which the resolution, frequency, pin #, and channel used for the PWM.  The values allowed to be passed to the set() method are limited by what resolution is specified, with the default being 8 bits, and the maximum being 16 bits.  In other words, if in 8 bit mode, the maximum power value that can be specified is 127, and the minimum is -128, whereas in 16 bit mode, the maximum is 32767 and the minimum is -32768.  8 bit mode is the default since that is also the resolution of the joysticks on the PS3 controller, so it makes the translation extremely simple.

# Installation and Setup
You will need a Windows computer (Linux may also work but you'll have to find another mirror for SixaxisPairTool or build an equivalent tool from source), an [ESP32](https://www.digikey.com/en/products/detail/schtoeta-engineering-limited/ESP32-PICO-KIT/9381703?utm_adgroup=RF%20Evaluation%20and%20Development%20Kits%2C%20Boards&utm_source=bing&utm_medium=cpc&utm_campaign=Shopping_Product_RF%2FIF%20and%20RFID&utm_term=&utm_content=RF%20Evaluation%20and%20Development%20Kits%2C%20Boards&utm_id=bi_cmp-274517354_adg-1305120525217465_ad-81570081365825_pla-4585169650565091_dev-c_ext-_prd-9381703&msclkid=df76669db71419525ec60620bbe5bed2), a [PS3 Controller](https://www.amazon.com/Wireless-Controller-Playstation-Bluetooth-Gamepad/dp/B08CVFKKPM/ref=sr_1_1_sspa?dchild=1&keywords=ps3+controller&qid=1623002488&sr=8-1-spons&psc=1&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEyRkVZM0I2ME5KQVQ3JmVuY3J5cHRlZElkPUEwMjg0NDc0MlBQS1JaNEZUQzlWNyZlbmNyeXB0ZWRBZElkPUEwMjU1MTg0MlVTUjY5UkE5NVoyNiZ3aWRnZXROYW1lPXNwX2F0ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=), Micro-USB cable, and Mini-USB cable to connect to the ESP32 and PS3 Controller, respectively.

We used the Arduino IDE for our programming when developing this.  Information on setting up the Arduino IDE for ESP32 development can be found [here](https://dronebotworkshop.com/esp32-intro/).  After getting the board installed in your IDE, you will need to move the code in the `src` folder in this repo to a new folder under `libraries` in your Arduino installation.  Then go to Sketch->Include Library and find whatever you named the new folder in the libraries list.  It should show up under `Contributed Libraries`.  This should include the required header files.  You will also need to install [this library](https://github.com/jvpernis/esp32-ps3) and [this library](https://github.com/madhephaestus/ESP32Encoder) as they are required dependencies for this software.

After setting up your IDE, you should download SixaxisPairTool from [this link](https://sixaxispairtool.en.lo4d.com/windows).  This allows you to modify the saved MAC address inside your PS3 controller to connect it to the ESP32.  Change it to an available MAC you would like to use.  Then, when using the `GameController` class, simply pass the MAC address in the controller as a string in the constructor, separating each byte with a colon.

You should be good to go to begin your development with the motor controllers and the ESP32!  Examples coming soon.

# Limitations
This code will run a very minimalist robot, with only basic motor and controller support.  More features may be added in the future, but as of now more complicated features like PID control, encoder, gyroscopes, etc. are up to you to implement.
